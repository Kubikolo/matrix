import numpy as np

def generate_multipliable_matrices(
    min_size=1, max_size=10, 
    dtype=float, 
    seed=None
):

    rng = np.random.default_rng(seed)

    A = rng.integers(min_size, max_size, size=(3, 3)).astype(dtype)
    B = rng.integers(min_size, max_size, size=(3, 3)).astype(dtype)

    return A, B

def multiply_ai(A, B):
    M = [0] * 23

    M[0]  = (A[0,0] + A[0,1] + A[0,2] - A[1,0] - A[1,1] - A[2,1] - A[2,2]) * B[1,1]
    M[1]  = (A[0,0] - A[1,0]) * (-B[0,1] + B[1,1])
    M[2]  = A[1,1] * (-B[0,0] + B[0,1] + B[1,0] - B[1,1] - B[1,2] - B[2,0] + B[2,2])
    M[3]  = (-A[0,0] + A[1,0] + A[1,1]) * (B[0,0] - B[0,1] + B[1,1])
    M[4]  = (A[1,0] + A[1,1]) * (-B[0,0] + B[0,1])
    M[5]  = A[0,0] * B[0,0]
    M[6]  = (-A[0,0] + A[2,0] + A[2,1]) * (B[0,0]-B[0,2] + B[1,2])
    M[7]  = (-A[0,0] + A[2,0]) * (B[0,2] - B[1,2])
    M[8]  = (A[2,0] + A[2,1]) * (-B[0,0] + B[0,2])
    M[9]  = (A[0,0] + A[0,1] + A[0,2] - A[1,1] - A[1,2] - A[2,0] - A[2,1]) * B[1,2]
    M[10] = A[2,1] * (-B[0,0] + B[0,2] + B[1,0] - B[1,1] - B[1,2] - B[2,0] + B[2,1])
    M[11] = (-A[0,2] + A[2,1] + A[2,2]) * (B[1,1] + B[2,0] - B[2,1])
    M[12] = (A[0,2] - A[2,2]) * (B[1,1] - B[2,1])
    M[13] = A[0,2] * B[2,0]
    M[14] = (A[2,1] + A[2,2]) * (-B[2,0] + B[2,1])
    M[15] = (-A[0,2] + A[1,1] + A[1,2]) * (B[1,2] + B[2,0] - B[2,2])
    M[16] = (A[0,2] - A[1,2]) * (B[1,2] - B[2,2])
    M[17] = (A[1,1] + A[2,1]) * (-B[2,0] + B[2,2])
    M[18] = A[0,1] * B[1,0]
    M[19] = A[1,2] * B[2,1]
    M[20] = A[1,0] * B[0,2]
    M[21] = A[2,0] * B[0,1]
    M[22] = A[2,2] * B[2,2]

    C = np.zeros((3, 3))

    C[0,0] = M[5]  + M[13] + M[18]
    C[0,1] = M[0]  + M[3]  + M[4]  + M[5]  + M[11] + M[13] + M[14]
    C[0,2] = M[5]  + M[6]  + M[8]  + M[9]  + M[13] + M[15] + M[17]
    C[1,0] = M[1]  + M[2]  + M[3]  + M[4]  + M[5]  + M[15] + M[16]
    C[1,1] = M[1]  + M[3]  + M[4]  + M[5]  + M[19]
    C[1,2] = M[13] + M[15] + M[16] + M[17] + M[18] + M[20]
    C[2,0] = M[5]  + M[6]  + M[7]  + M[10] + M[11] + M[12] + M[13]
    C[2,1] = M[11] + M[12] + M[13] + M[14] + M[21]
    C[2,2] = M[5]  + M[6]  + M[7]  + M[8]  + M[22]

    return C

A, B = generate_multipliable_matrices()
print(A @ B)
print(multiply_ai(A, B))